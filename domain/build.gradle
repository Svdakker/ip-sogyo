plugins {
    id 'kotlin-conventions'
    id 'jacoco'
    id 'org.barfuin.gradle.jacocolog' version '3.1.0'
}

tasks.named('test') {
    useJUnitPlatform()
    finalizedBy jacocoTestReport
}

jacoco {
    toolVersion = "0.8.11"
}

jacocoTestReport {
    dependsOn test

    reports {
        html.required = true
        xml.required = true
        csv.required = false
    }
}

jacocoTestCoverageVerification {
    violationRules {
        rule { limit { minimum = 0.95 } }
    }
}
